from pydub import AudioSegment
from pydub.generators import Sine
from pydub.playback import play


#notes = [0.531126276571, 0.531513578974, 0.532782868597, 0.534246148349, 0.539693932202, 0.550210248412, 0.555549539443, 0.560459370368, 0.558829598925, 0.558451068899, 0.564054009954, 0.566057456509, 0.566538466473, 0.567913707481, 0.5695787732, 0.566587811082, 0.561961288638, 0.56226280115, 0.56316622662, 0.561720802546, 0.559629573971, 0.554055439518, 0.550286650142, 0.547971366627, 0.547433765975, 0.547199179791, 0.549644102369, 0.555021386949, 0.561015155401, 0.567133263351, 0.568882818117, 0.568233111106, 0.568296333689, 0.567300441091, 0.566222147116, 0.566315577621, 0.568405281216, 0.569736575052, 0.570779244773, 0.573427398839, 0.573507100351, 0.570634030914, 0.567134999817, 0.563924172881, 0.561940572604, 0.561088765666, 0.558334889034, 0.55388412786, 0.552676456008, 0.553042475354, 0.554559851256, 0.555607219792, 0.55546554122, 0.55719670217, 0.560048334712, 0.562598307427, 0.56462987059, 0.56558078708, 0.564303493741, 0.559844828374, 0.555656789475, 0.552658783311, 0.543666460868, 0.534230450879, 0.528217756334, 0.530995294932, 0.537673679118, 0.546163430097, 0.551208680766, 0.543155898013, 0.53025897877, 0.517444287402, 0.509992074871, 0.506081634383, 0.505921483412, 0.513412015494, 0.520911545377, 0.530836016029, 0.536100777138, 0.538048010776, 0.538532822966, 0.535677069013, 0.532386911181, 0.5289592376, 0.525594375015, 0.523290719872, 0.522231677282, 0.521824339387, 0.521045911723, 0.521261869241, 0.522539914434, 0.523221363188, 0.523799390221, 0.522467996402, 0.520556820322, 0.520185100419, 0.520808470327, 0.520678011912, 0.52136946123, 0.521638822597, 0.52104920473, 0.520910244462, 0.520315506749, 0.520794526489, 0.520604453028, 0.5213598287, 0.521897761321, 0.519327082156, 0.515159148604, 0.512490737548, 0.510366851483, 0.5106124207, 0.511339233215, 0.510720452917, 0.510263245401, 0.512345829897, 0.515763356321, 0.521849490801, 0.537343555805, 0.552259395487, 0.559214596025, 0.563698986027, 0.56427054784, 0.559614990812, 0.551904845134, 0.542183973013, 0.531249710168, 0.516381901561, 0.508412828755, 0.515064173825, 0.520840274545, 0.524855866797, 0.532763016594, 0.541294639908, 0.54878030168, 0.553089510717, 0.553636279484, 0.550748502567, 0.550703426208, 0.554554931566, 0.561341335568, 0.563709520611, 0.561269490678, 0.559053950031, 0.558032449449, 0.559112073312, 0.559706865408, 0.553469174686, 0.542860068179, 0.522354835116, 0.498235909149, 0.485451191, 0.478170030323, 0.461355600579, 0.441377754782, 0.41142473393, 0.368497559519, 0.326526797821, 0.323500264736, 0.344439588629, 0.373259753556, 0.383091625522, 0.385974156862, 0.367126162039, 0.347736703588, 0.338871574722, 0.344266499798, 0.337402775945, 0.32636128564, 0.322335388996, 0.321661605645, 0.313213751573, 0.311465842446, 0.308337363036, 0.309009013824, 0.307903255092, 0.309691279494, 0.308033332867, 0.311519968408, 0.32078025925, 0.357441524617, 0.408236305808, 0.480005124715, 0.530598346251, 0.560177095127, 0.591694474949, 0.620829747014, 0.617232344728, 0.606997290082, 0.599778572442, 0.58347069666, 0.562665023412, 0.545211662145, 0.541633572225, 0.548424869342, 0.559828111119, 0.563559087984, 0.556975720113, 0.543355464201, 0.526424327118, 0.510826203875, 0.499532679788, 0.494823513277, 0.498038637773, 0.501869042314, 0.514549627252, 0.530805650573, 0.520299339398, 0.510445742736, 0.508790906146, 0.510326826708, 0.516337460182, 0.525770124117, 0.535440985704, 0.543228900365, 0.551574916795, 0.558358011704, 0.563387061623, 0.564139047158, 0.560696458618, 0.557206272903, 0.554238337797, 0.552654997198, 0.553493191877, 0.556212287513, 0.558214025221, 0.559823534483, 0.559571890534, 0.559151041403, 0.558649521481, 0.55675103651, 0.552998678816, 0.550013565719, 0.548677883542, 0.551343411008, 0.555957247382, 0.560718265985, 0.565714189908, 0.571084597355, 0.577257566604, 0.589157943303, 0.59941836799, 0.608585766676, 0.617378821721, 0.622409171566, 0.625962881166, 0.626639193528, 0.626091891826, 0.627013879818, 0.628822525397, 0.630723645381, 0.632327193607, 0.633639519185, 0.633563305412, 0.631688430041, 0.629498193001, 0.627786200095, 0.627320753048, 0.626579458341, 0.623767823322, 0.622676831774, 0.621003701082, 0.619002868909, 0.618966107014, 0.621030991453, 0.624683807446, 0.626175854597, 0.625630748283, 0.622690670888, 0.619168014266, 0.616725662051, 0.61354643152, 0.612114510518, 0.611854885589, 0.610907453958, 0.609534118567, 0.607697040326, 0.603279499764, 0.598805314987, 0.593795532918, 0.588030948437, 0.584049156259, 0.580959618867, 0.578671220615, 0.578557945726, 0.578150581638, 0.576798300226, 0.572319790097, 0.563455181931, 0.55247410861, 0.530668719095, 0.509056551773, 0.497852490343, 0.478736899649, 0.462422453673, 0.45044301369, 0.441464100907, 0.435630943782, 0.434118879229, 0.43298936066, 0.4350371181, 0.441249501974, 0.450523558015, 0.456719436031, 0.465380516121, 0.467850917123, 0.473207851575, 0.479135732734, 0.47430836029, 0.455772183766, 0.454144806614, 0.453250471231, 0.455419694821, 0.458660494929, 0.459953296219, 0.463352325408, 0.467264922099, 0.47020778658, 0.474393805115, 0.483899581064, 0.494369077708, 0.50478219591, 0.515216687858, 0.525519132114, 0.528366259067, 0.527434293765, 0.524824152672, 0.519706744037, 0.515675630426, 0.511808586811, 0.509799067407, 0.510218801539, 0.511263422558, 0.512883184166, 0.513818911494, 0.513611571448, 0.511209906113, 0.508718091157, 0.507731645965, 0.504394446369, 0.502802919709, 0.500211838319, 0.495519383278, 0.492149580597, 0.487963657708, 0.482366339142, 0.47739859233, 0.474186384452, 0.472377125485, 0.472032949113, 0.473907663909, 0.47636487606, 0.479440016421, 0.48382248238, 0.490283568832, 0.495991685029, 0.500438054739, 0.502572606063, 0.503783002295, 0.504081967253, 0.504755080906, 0.506673868388, 0.508031136416, 0.508837183978, 0.510946401691, 0.512249289475, 0.513857758676, 0.515350139888, 0.516569611499, 0.516513247949, 0.516456248748, 0.51803384915, 0.520129997484, 0.522520374456, 0.523612636109, 0.524385362131, 0.524894551681, 0.525413999734, 0.526372737687, 0.529065732257, 0.531101085585, 0.532000881303, 0.53414876906, 0.534988361711, 0.535748650333, 0.536627005837, 0.538028919507, 0.539267569307, 0.539715816743, 0.539399335178, 0.539100290161, 0.539015474678, 0.540129649784, 0.54235572035, 0.545020030681, 0.54616427439, 0.546624728176, 0.547409615331, 0.549132295173, 0.551133895321, 0.552206169491, 0.551674203899, 0.550015112783, 0.546981051345, 0.542799264156, 0.541136800894, 0.539747503447, 0.537602188752, 0.532511280898, 0.524799306274, 0.516102400843, 0.508545500789, 0.503819810666, 0.501202466671, 0.50255533095, 0.507962289537, 0.51669714568, 0.522925167366, 0.528965598558, 0.539102255932, 0.550198409164, 0.560302682356, 0.575106007715, 0.59120839795, 0.608189928637, 0.62327374552, 0.63706738558, 0.648172245192, 0.65650861429, 0.662460136893, 0.669227607801, 0.673496309484, 0.680091385759, 0.68273516341, 0.680264161286, 0.675040223605, 0.671075842357, 0.668074996251, 0.668487637817, 0.669423461475, 0.667849718615, 0.643032939497, 0.642643426366, 0.641275906376, 0.641738806207, 0.642506499236, 0.643837515383, 0.645029441788, 0.648746396109, 0.654954224268, 0.666946331219, 0.679089327297, 0.694677135207, 0.718068115049, 0.74191413876, 0.771164522624, 0.803625342109, 0.836922696958, 0.870848932226, 0.91160944506, 0.950956807399, 0.987097788619, 1.03469214771, 1.07365290094, 1.10540560031, 1.13222407164, 1.14561662351, 1.14984310275, 1.14457091212, 1.1346878543, 1.11733089, 1.09344822534, 1.06248766849, 1.03201514085, 0.999044054632, 0.965484611846, 0.930838535298, 0.901392809701, 0.869986912582, 0.844676012123, 0.824098184815, 0.795318747065, 0.771590437653, 0.750399568962, 0.730135336649, 0.715248703865, 0.70217767365, 0.685573098256, 0.671031246854, 0.657922820612, 0.644830517489, 0.632350178686, 0.621186799949, 0.607781643118, 0.597964145807, 0.588951774495, 0.580103774164, 0.572043498938, 0.565349572594, 0.558449671593, 0.550085347923, 0.542406282243, 0.534607286922, 0.53057210761, 0.527928231642, 0.528228458855, 0.529111244337, 0.529384710272, 0.527964351798, 0.526366292252, 0.525300135135, 0.523650879036, 0.522142090215, 0.522027115293, 0.523457149119, 0.52420670296, 0.523881650651]
notes = [0.531126276571, 0.531513578974, 0.532782868597, 0.534246148349, 0.539693932202, 0.550210248412, 0.555549539443, 0.560459370368, 0.558829598925, 0.558451068899, 0.564054009954, 0.566057456509, 0.566538466473, 0.567913707481, 0.5695787732, 0.566587811082, 0.561961288638, 0.56226280115, 0.56316622662, 0.561720802546, 0.559629573971, 0.554055439518, 0.550286650142, 0.547971366627, 0.547433765975, 0.547199179791, 0.549644102369, 0.555021386949, 0.561015155401, 0.567133263351, 0.568882818117, 0.568233111106, 0.568296333689, 0.567300441091, 0.566222147116]

def makeNote(i_f):
	#Generate 1k,2k,3k tones of 3 sec duration
	return Sine(round(i_f)).to_audio_segment(duration=400)

def mapNumber(x):
	X = abs(x)
	C = 200
	D = 700
	A = min(notes)
	B = max(notes)
	Y = (X-A)/(B-A) * (D-C) + C
	return Y

#Append each tone onto other with crossfade
#multitone = tone1.append(tone2, crossfade=50).append(tone3, crossfade=50)

for i in range(len(notes)):
	if i== 0:
		multitone = makeNote(mapNumber(notes[i]))
	else:
		multitone = multitone.append(makeNote(mapNumber(notes[i])), crossfade=100)

play(multitone)
#file_handle = multitone.export("test.wav", format="wav")



# import pyaudio
# import numpy as np





# def playNote(i_f):

# 	volume = 0.5     # range [0.0, 1.0]
# 	fs = 44100 #i_fs      #44100 # sampling rate, Hz, must be integer
# 	f = round(i_f/3)* 3   #440.0 # sine frequency, Hz, may be float
# 	print f
# 	duration = 0.33   # in seconds, may be float
	
# 	# generate samples, note conversion to float32 array
# 	samples = (np.sin(2*np.pi*np.arange(fs*duration)*f/fs)).astype(np.float32)
# 	# for paFloat32 sample values must be in range [-1.0, 1.0]

# 	# play. May repeat with different volume values (if done interactively) 
# 	stream.write(volume*samples)





# notes = [-3.34649754, -3.34790754, -3.34813428, -3.34572363, -3.33716846, -3.322681, -3.3069768, -3.29307985, -3.28574, -3.28167534, -3.27787733, -3.27526951, -3.271022, -3.266838, -3.26549435, -3.26695871, -3.26934218, -3.27025867, -3.27344227, -3.28257179, -3.29626226, -3.31650043, -3.34024763, -3.358746, -3.37168741, -3.3858273, -3.39326215, -3.39584756, -3.39740133, -3.39552784, -3.39582968, -3.39801264, -3.3999083, -3.40274668, -3.406195, -3.40705633, -3.40657663, -3.40699887, -3.40701079, -3.40511727, -3.40571547, -3.40805387, -3.41025448, -3.41121674, -3.4111433, -3.41026068, -3.4110105, -3.41557145, -3.41743016, -3.41638184, -3.41356564, -3.41144276, -3.411433, -3.41232586, -3.41275859, -3.41289616, -3.41313934, -3.41247058, -3.411831, -3.41042471, -3.40625334, -3.399817, -3.394659, -3.38950062, -3.38113737, -3.36248446, -3.34549618, -3.33248663, -3.32330918, -3.328361, -3.339674, -3.35781813, -3.374702, -3.38490057, -3.38872862, -3.38106728, -3.37160254, -3.36023521, -3.35432434, -3.35302949, -3.35437679, -3.35704422, -3.35898948, -3.35941744, -3.35913444, -3.358878, -3.36025763, -3.361528, -3.363575, -3.36464024, -3.3646667, -3.364474, -3.364185, -3.36475563, -3.36638546, -3.36682034, -3.36607885, -3.36556363, -3.3651762, -3.36515474, -3.36570787, -3.36581469, -3.36589432, -3.36389017, -3.361414, -3.35584712, -3.35018253, -3.34609652, -3.34267473, -3.34092116, -3.34095478, -3.33992052, -3.33848, -3.337669, -3.33654261, -3.33245635, -3.328012, -3.32459116, -3.32362652, -3.3218503, -3.32663417, -3.33683538, -3.351656, -3.374576, -3.40196753, -3.43587017, -3.47503686, -3.52101517, -3.55438566, -3.569324, -3.57803869, -3.583468, -3.5853, -3.58637, -3.58795071, -3.590273, -3.59411883, -3.60036039, -3.60482, -3.60451651, -3.60500288, -3.607248, -3.610542, -3.61365771, -3.62024641, -3.62975025, -3.64200735, -3.65819979, -3.682251, -3.70624685, -3.72674084, -3.72392559, -3.696118, -3.65737152, -3.60259271, -3.56763172, -3.54670668, -3.53820467, -3.5253315, -3.51729679, -3.53005362, -3.56198883, -3.6059413, -3.65707159, -3.689419, -3.709237, -3.72673321, -3.74190187, -3.761489, -3.770183, -3.77734184, -3.78812551, -3.79127455, -3.79819, -3.809276, -3.81595039, -3.81708574, -3.827803, -3.8426435, -3.845478, -3.83801126, -3.80722523, -3.76534319, -3.750957, -3.75868154, -3.798085, -3.862299, -3.92244267, -3.97955585, -4.01681137, -4.04214764, -4.05616, -4.06083965, -4.05377626, -4.03257227, -4.0104, -3.989123, -3.96978331, -3.961444, -3.95903182, -3.95880413, -3.96024871, -3.95589042, -3.94713783, -3.925982, -3.91127324, -3.9121542, -3.91459441, -3.9265337, -3.94635439, -3.96398544, -3.97679472, -3.98504782, -3.98916316, -3.989522, -3.98663616, -3.984579, -3.984671, -3.98721719, -3.992053, -3.997892, -4.003119, -4.00743675, -4.01048, -4.011526]

# player = pyaudio.PyAudio()
# stream = player.open(format=pyaudio.paFloat32,
# 	                channels=1,
# 	                rate=44100,
# 	                output=True)


# for i in range(len(notes)):
# 	playNote(mapNumber(notes[i]))

# stream.stop_stream()
# stream.close()
# player.terminate()

# #27.5       	      
# # playNote(261.63)

# # playNote(400)

# # playNote(800)




# #playNote(100, 440)





